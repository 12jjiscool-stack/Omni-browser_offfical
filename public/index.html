<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Omni</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: white;
      background: url('https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1950&q=80') no-repeat center center fixed;
      background-size: cover;
    }
    .overlay {
      background: rgba(0,0,0,0.55);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 1rem;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    .search-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
      background: rgba(30,41,59,0.8);
      padding: 0.7rem;
      border-radius: 0.7rem;
    }
    .search-row input {
      padding: 0.6rem;
      border-radius: 0.4rem;
      border: none;
      width: 260px;
    }
    .search-row button {
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 0.4rem;
      padding: 0.6rem 1rem;
      cursor: pointer;
    }
    .gmail-btn { background: #ea4335 !important; }
    .status { margin-left: auto; display: flex; gap: 0.7rem; }
    .shortcuts { display: flex; gap: 0.8rem; flex-wrap: wrap; margin-top: 0.8rem; justify-content: center; }
    .shortcut { background: rgba(51,65,85,0.8); padding: 0.5rem 1rem; border-radius: 0.5rem; cursor: pointer; }
    .shortcut:hover { background: rgba(71,85,105,0.9); }
    .bubble {
      position: fixed; bottom: 10px; left: 10px; font-style: italic;
      background: rgba(0,0,0,0.5); padding: 5px 10px; border-radius: 8px;
    }
    .edit-bg {
      position: fixed; bottom: 10px; right: 10px;
      padding: 6px 12px; background: rgba(30,41,59,0.8);
      border: none; border-radius: 8px; color: white; cursor: pointer;
    }
    .edit-bg:hover { background: rgba(51,65,85,0.9); }
    /* Music Player */
    .music-player {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 1000;
      background: rgba(0,0,0,0.6);
      padding: 8px;
      border-radius: 10px;
      width: 260px;
    }
    .music-player input {
      width: 180px;
      padding: 4px;
      border-radius: 6px;
      border: none;
      margin-bottom: 5px;
    }
    .music-player button {
      background:#ff5500; color:white;
      border:none; border-radius:6px;
      padding:4px 8px; cursor:pointer;
    }
    .music-result {
      cursor:pointer;
      padding:4px;
      border-bottom:1px solid rgba(255,255,255,0.2);
    }
    .music-result:hover {
      background:rgba(255,255,255,0.1);
    }
  </style>
</head>
<body>
  <!-- Music Player (SoundCloud Embed with Search + Results) -->
  <div class="music-player">
    <input id="scSearch" type="text" placeholder="Search SoundCloud...">
    <button onclick="searchSC()">Search</button>
    <div id="scResults" style="max-height:150px; overflow-y:auto; margin-top:5px;"></div>
    <iframe id="scPlayer" 
      width="250" height="120"
      scrolling="no" frameborder="no" allow="autoplay"
      src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/forss/flickermood">
    </iframe>
  </div>

  <div class="overlay">
    <h1>Omni</h1>

    <div class="search-row">
      <button class="gmail-btn" onclick="openGmail()">üìß Gmail</button>
      <input id="searchBox" type="text" placeholder="Search with DuckDuckGo..." required />
      <button onclick="searchQuery()">Search</button>
      <div class="status">
        <span id="battery">üîã --%</span>
        <span id="temperature">üå°Ô∏è --¬∞C</span>
      </div>
    </div>

    <div class="shortcuts" id="shortcuts"></div>
    <button onclick="addShortcut()">‚ûï Add Shortcut</button>
  </div>

  <div class="bubble">Made by Jacob Maddox</div>
  <button class="edit-bg" onclick="editBackground()">Edit Background</button>

  <script>
    // Gmail
    function openGmail(){ window.open("https://mail.google.com/","_blank"); }

    // Search
    function searchQuery(){
      const q=document.getElementById("searchBox").value;
      if(q) window.open("https://duckduckgo.com/?q="+encodeURIComponent(q),"_blank");
    }

    // Battery
    navigator.getBattery?.().then(b=>{
      function update(){ document.getElementById("battery").textContent="üîã "+Math.round(b.level*100)+"%"; }
      update(); b.addEventListener("levelchange",update);
    });

    // Weather
    async function fetchWeather(){
      try{
        const loc=await fetch("https://ipapi.co/json/").then(r=>r.json());
        const city=loc.city, region=loc.region;
        const temp=await fetch(`https://wttr.in/${city}?format=%t`).then(r=>r.text());
        document.getElementById("temperature").textContent=`${city}, ${region} üå°Ô∏è ${temp}`;
      }catch{ document.getElementById("temperature").textContent="üå°Ô∏è N/A"; }
    } fetchWeather();

    // Background editor
    function editBackground(){
      const url=prompt("Enter image URL for background:");
      if(url){
        document.body.style.background=`url('${url}') no-repeat center center fixed`;
        document.body.style.backgroundSize="cover";
      }
    }

    // Shortcuts
    const shortcutsDiv=document.getElementById("shortcuts");
    function addShortcut(){
      const name=prompt("Shortcut name:"), url=prompt("Shortcut URL:");
      if(name&&url){
        const el=document.createElement("div");
        el.className="shortcut"; el.textContent=name;
        el.onclick=()=>window.open(url,"_blank");
        shortcutsDiv.appendChild(el);
      }
    }

    // SoundCloud Search with Results
    async function searchSC(){
      const q=document.getElementById("scSearch").value.trim();
      const resultsDiv=document.getElementById("scResults");
      resultsDiv.innerHTML=""; // clear old results
      if(!q) return;

      try{
        const res=await fetch(`https://api-v2.soundcloud.com/search/tracks?q=${encodeURIComponent(q)}&client_id=YOUR_CLIENT_ID_HERE`);
        const data=await res.json();
        if(data.collection && data.collection.length>0){
          data.collection.slice(0,5).forEach(track=>{
            const btn=document.createElement("div");
            btn.className="music-result";
            btn.textContent=track.title;
            btn.onclick=()=>{
              document.getElementById("scPlayer").src=`https://w.soundcloud.com/player/?url=${encodeURIComponent(track.permalink_url)}`;
              resultsDiv.innerHTML="";
            };
            resultsDiv.appendChild(btn);
          });
        }else{
          resultsDiv.innerHTML="<em>No results found.</em>";
        }
      }catch(e){
        console.error(e);
        resultsDiv.innerHTML="<em>‚ö†Ô∏è SoundCloud search failed.</em>";
      }
    }
  </script>
</body>
</html>
