<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Omni</title>
  <style>
    :root {
      --bg: #0d0d0d;
      --text: #fff;
      --accent: #00bfff;
      --glow: #00bfff;
      --button-bg: #1c1c1c;
    }

    body.light {
      --bg: #f2f2f2;
      --text: #000;
      --accent: #0078ff;
      --glow: #0078ff;
      --button-bg: #e4e4e4;
    }

    body.dark {
      --bg: #121212;
      --text: #fff;
      --accent: #bb86fc;
      --glow: #bb86fc;
      --button-bg: #1e1e1e;
    }

    body.night {
      --bg: #00111a;
      --text: #e0ffff;
      --accent: #0099cc;
      --glow: #0099cc;
      --button-bg: #00222f;
    }

    body.astro {
      background: url('https://cdn.pixabay.com/photo/2013/07/18/20/26/stars-164550_1280.jpg') no-repeat center center/cover;
      --text: #ffffff;
      --accent: #89cff0;
      --glow: #89cff0;
      --button-bg: rgba(0, 0, 0, 0.5);
    }

    body.modern {
      background: linear-gradient(135deg, #00f5a0, #00d9f5, #0061f5);
      --text: #ffffff;
      --accent: #ffffff;
      --glow: #ffffff;
      --button-bg: rgba(255, 255, 255, 0.2);
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--bg);
      color: var(--text);
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      transition: background 0.5s, color 0.5s;
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 0.5rem;
      text-shadow: 0 0 15px var(--glow);
    }

    .description {
      font-size: 1.2rem;
      color: var(--text);
      margin-bottom: 20px;
    }

    .clock {
      font-family: 'Courier New', monospace;
      font-size: 2.5rem;
      text-shadow: 0 0 15px var(--glow);
      margin-bottom: 40px;
      transition: text-shadow 0.5s;
    }

    .top-bar {
      display: flex;
      align-items: center;
      gap: 10px;
      position: absolute;
      top: 15px;
      left: 50%;
      transform: translateX(-50%);
    }

    input {
      padding: 12px;
      width: 500px;
      border-radius: 25px;
      border: none;
      outline: none;
      background-color: var(--button-bg);
      color: var(--text);
      font-size: 1rem;
      transition: 0.3s;
    }

    input:focus {
      box-shadow: 0 0 10px var(--glow);
    }

    .menu, .dice {
      background-color: var(--button-bg);
      color: var(--text);
      border: none;
      padding: 10px 14px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.1rem;
      transition: background 0.3s;
    }

    .menu:hover, .dice:hover {
      background-color: var(--accent);
      color: #fff;
    }

    .profile {
      position: absolute;
      top: 15px;
      right: 15px;
      background-color: var(--button-bg);
      border-radius: 50%;
      width: 45px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      cursor: pointer;
      color: var(--text);
      box-shadow: 0 0 10px var(--glow);
    }

    .official-bubble {
      position: fixed;
      bottom: 15px;
      right: 15px;
      background: var(--accent);
      color: white;
      padding: 10px 20px;
      border-radius: 30px;
      box-shadow: 0 0 15px var(--glow);
      font-weight: bold;
      font-size: 0.9rem;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 20;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: var(--button-bg);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      color: var(--text);
      box-shadow: 0 0 20px var(--glow);
      min-width: 300px;
    }

    .modal input {
      width: 80%;
      margin: 5px 0;
      padding: 8px;
      border-radius: 10px;
      border: none;
      background: var(--bg);
      color: var(--text);
    }

    .modal button {
      margin-top: 10px;
      background: var(--accent);
      border: none;
      color: white;
      padding: 8px 15px;
      border-radius: 10px;
      cursor: pointer;
    }

    .mathsolver {
      display: none;
      position: fixed;
      z-index: 25;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: var(--button-bg);
      border-radius: 15px;
      box-shadow: 0 0 25px var(--glow);
      padding: 20px;
      width: 300px;
      text-align: center;
    }

    .mathsolver input {
      width: 90%;
      padding: 10px;
      border: none;
      border-radius: 10px;
      background: var(--bg);
      color: var(--text);
      font-size: 1.2rem;
      text-align: right;
      margin-bottom: 10px;
    }

    .mathsolver .buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
    }

    .mathsolver button {
      background: var(--button-bg);
      border: none;
      color: var(--text);
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
      font-size: 1.1rem;
    }

    .mathsolver button:hover {
      background: var(--accent);
      color: white;
    }

    .close-btn {
      position: absolute;
      top: 5px;
      right: 10px;
      cursor: pointer;
      color: var(--text);
      font-weight: bold;
    }
  </style>
</head>
<body class="night">
  <div class="profile" id="profileBubble">?</div>

  <div class="top-bar">
    <button class="menu" id="menuBtn">â˜°</button>
    <input type="text" id="searchBar" placeholder="Search the web..." />
    <button class="dice" id="diceBtn">ðŸŽ²</button>
  </div>

  <h1>Omni</h1>
  <div class="description">The worldâ€™s all-in-one search engine.</div>
  <div class="clock" id="clock" title=""></div>

  <div class="official-bubble">Official OmniEngine</div>

  <!-- Sign In Modal -->
  <div class="modal" id="signInModal">
    <div class="modal-content">
      <h2>Sign In</h2>
      <input type="text" id="username" placeholder="Username" /><br />
      <input type="email" id="email" placeholder="Email" /><br />
      <input type="password" id="password" placeholder="Password" /><br />
      <button id="saveSignIn">Save</button>
    </div>
  </div>

  <!-- Math Solver Modal -->
  <div class="mathsolver" id="mathSolver">
    <span class="close-btn" id="closeSolver">âœ–</span>
    <input type="text" id="solverInput" readonly />
    <div class="buttons" id="solverButtons"></div>
  </div>

  <script>
    // --- Official Site Check ---
    if (window.location.hostname !== "omniengines.netlify.app") {
      window.location.href = "https://google.com";
    }

    // --- Clock ---
    const clock = document.getElementById('clock');
    setInterval(() => {
      const now = new Date();
      const time = now.toLocaleTimeString();
      clock.textContent = time;
      clock.title = now.toDateString();
    }, 1000);

    // --- Search ---
    const searchBar = document.getElementById('searchBar');
    searchBar.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const query = searchBar.value.trim();
        if (query) {
          window.open(`https://duckduckgo.com/?q=${encodeURIComponent(query)}`, '_blank');
        }
      }
    });

    // --- Dice Button ---
    document.getElementById('diceBtn').onclick = () => {
      const sites = ["https://pbskids.org", "https://youtube.com", "https://coolmathgames.com"];
      const random = sites[Math.floor(Math.random() * sites.length)];
      window.open(random, '_blank');
    };

    // --- Sign In Modal ---
    const modal = document.getElementById('signInModal');
    const savedUser = localStorage.getItem('username');
    if (!savedUser) modal.style.display = 'flex';

    document.getElementById('saveSignIn').onclick = () => {
      const user = document.getElementById('username').value;
      const email = document.getElementById('email').value;
      const pass = document.getElementById('password').value;
      if (user && email && pass) {
        localStorage.setItem('username', user);
        localStorage.setItem('email', email);
        localStorage.setItem('password', pass);
        document.getElementById('profileBubble').textContent = user[0].toUpperCase();
        modal.style.display = 'none';
      }
    };

    if (savedUser) {
      document.getElementById('profileBubble').textContent = savedUser[0].toUpperCase();
    }

    // --- Math Solver ---
    const solverModal = document.getElementById('mathSolver');
    const solverButtons = document.getElementById('solverButtons');
    const solverInput = document.getElementById('solverInput');

    const buttons = [
      '7','8','9','/','4','5','6','*',
      '1','2','3','-','0','.','=','+',
      'sin','cos','tan','(',')','C','âˆš'
    ];
    buttons.forEach(b => {
      const btn = document.createElement('button');
      btn.textContent = b;
      btn.onclick = () => {
        if (b === 'C') solverInput.value = '';
        else if (b === '=') {
          try {
            solverInput.value = eval(solverInput.value
              .replace('sin', 'Math.sin')
              .replace('cos', 'Math.cos')
              .replace('tan', 'Math.tan')
              .replace('âˆš', 'Math.sqrt'));
          } catch {
            solverInput.value = 'Error';
          }
        } else {
          solverInput.value += b;
        }
      };
      solverButtons.appendChild(btn);
    });

    document.getElementById('menuBtn').onclick = () => solverModal.style.display = 'block';
    document.getElementById('closeSolver').onclick = () => solverModal.style.display = 'none';
  </script>
</body>
</html>
